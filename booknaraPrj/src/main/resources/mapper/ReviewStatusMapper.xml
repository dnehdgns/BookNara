<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.booknara.booknaraPrj.reviewstatus.mapper.ReviewStatusMapper">

    <select id="selectByIsbn" resultType="com.booknara.booknaraPrj.reviewstatus.dto.ReviewStatusDTO">
        SELECT
            ISBN13                AS isbn13,
            IFNULL(REVIEW_CNT, 0) AS reviewCnt,
            IFNULL(RATING_AVG, 0) AS ratingAvg
        FROM REVIEW_STAT
        WHERE ISBN13 = #{isbn13}
    </select>

    <select id="selectByIsbns" resultType="com.booknara.booknaraPrj.reviewstatus.dto.ReviewStatusDTO">
        SELECT
        ISBN13                AS isbn13,
        IFNULL(REVIEW_CNT, 0) AS reviewCnt,
        IFNULL(RATING_AVG, 0) AS ratingAvg
        FROM REVIEW_STAT
        WHERE ISBN13 IN
        <foreach collection="isbns" item="isbn" open="(" separator="," close=")">
            #{isbn}
        </foreach>
    </select>

</mapper>