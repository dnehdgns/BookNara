
<th:block th:fragment="content" xmlns:th="http://www.thymeleaf.org">

    <!-- ===== ìš°ì¸¡ ì½˜í…ì¸  ì˜ì—­ ===== -->
    <main class="mypage-content">


    <!-- ğŸ“… FullCalendar -->
        <section class="calendar-box">
            <div id="calendar"></div>
        </section>

        <!-- ğŸ“š ëŒ€ì—¬ ë„ì„œ -->
        <section class="rental-box">
            <div class="section-header">
                <span>ëŒ€ì—¬ ë„ì„œ</span>
                <a href="/my/booklist">ë”ë³´ê¸° â†’</a>
            </div>

            <div class="book-list">
                <div class="book-item" th:each="r : ${currentRentals}">
                    <div class="book-thumb"
                         th:style="'background-image:url(' + ${r.coverImg} + ');'"></div>

                    <div class="book-title" th:text="${r.bookTitle}">ë„ì„œëª…</div>
                    <div class="book-date" th:text="'ë°˜ë‚© ì˜ˆì •ì¼ ' + ${#temporals.format(r.returnDueDate, 'yyyy-MM-dd')}"></div>
                </div>

                <div th:if="${#lists.isEmpty(currentRentals)}" style="padding:12px;">
                    ëŒ€ì—¬ì¤‘ì¸ ë„ì„œê°€ ì—†ìŠµë‹ˆë‹¤.
                </div>
            </div>

        </section>

        <!-- ğŸ“– ì—°ì²´ / ì´ë ¥ -->
        <section class="history-box">

            <div>
                <span> ì—°ì²´ ì¤‘ì¸ ë„ì„œ </span>
            </div>

            <div class="history-item" th:each="o : ${overdueRentals}">
                <div class="book-thumb"
                     th:style="'background-image:url(' + ${o.coverImg} + ');'"></div>

                <div class="book-info">
                    <div class="book-title" th:text="${o.bookTitle}">ë„ì„œëª…</div>
                    <div class="book-date"
                         th:text="'ë°˜ë‚© ì˜ˆì •ì¼ ' + ${#temporals.format(o.returnDueDate, 'yyyy-MM-dd')}"></div>
                    <div class="book-status">ì—°ì²´</div>
                </div>
            </div>

            <div th:if="${#lists.isEmpty(overdueRentals)}" style="padding:12px;">
                ì—°ì²´ ë„ì„œê°€ ì—†ìŠµë‹ˆë‹¤.
            </div>

        </section>


    </main>



<!-- ìº˜ë¦°ë” JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script src="/js/calendar.js"></script>

    <script th:inline="javascript">
        // calendar.jsì—ì„œ ì‚¬ìš©í•  ì›ë³¸ ëª©ë¡
        window.currentRentals = /*[[${currentRentals}]]*/ [];
        window.overdueRentals  = /*[[${overdueRentals}]]*/ [];
    </script>


</th:block>

