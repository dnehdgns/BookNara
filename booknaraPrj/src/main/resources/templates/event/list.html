<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>μ΄λ²¤νΈ νμ΄μ§€</title>

    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/event.css}" />
</head>
<body>
<!--<header id="siteHeader"></header>-->
<!-- ================= ν—¤λ” ================= -->
<div th:replace="fragments/header :: header"></div>

<main class="container">
    <h2 class="page-title">μ΄λ²¤νΈ νμ΄μ§€</h2>

    <section class="card">
        <div class="topbar">
            <div class="tabs">
                <a class="tab"
                   th:classappend="${tab} == 'ongoing' ? ' active' : ''"
                   th:href="@{/event/list(tab='ongoing')}"
                >μ§„ν–‰μ¤‘μ΄λ²¤νΈ</a>

                <a class="tab"
                   th:classappend="${tab} == 'closing' ? ' active' : ''"
                   th:href="@{/event/list(tab='closing')}"
                >λ§κ°μ„λ°•μ΄λ²¤νΈ</a>

                <a class="tab"
                   th:classappend="${tab} == 'closed' ? ' active' : ''"
                   th:href="@{/event/list(tab='closed')}"
                >λ§κ°λμ΄λ²¤νΈ</a>
            </div>

            <div class="right-tools">
                <!-- β… κ΄€λ¦¬μλ§ λ³΄μ΄λ” λ“±λ΅ λ²„νΌ -->
                <div class="admin-actions" sec:authorize="hasRole('ADMIN')">
                    <a class="btn btn--primary" th:href="@{/event/register}">λ“±λ΅ν•κΈ°</a>
                </div>

                <div class="search">
                    <input id="searchInput" type="text" placeholder="κ²€μƒ‰μ–΄ μ…λ ¥" />
                    <button id="searchBtn" type="button" aria-label="search">π”</button>
                </div>
            </div>
        </div>

        <div id="eventGrid" class="event-grid">
            <a class="event-card"
               th:each="event : ${list}"
               th:classappend="${tab} == 'closed' ? ' is-closed' : ''"
               th:href="@{/event/detail(id=${event.eventId})}">

                <div class="thumb">
          <span class="badge"
                th:text="${tab == 'closing' ? 'λ§κ°μ„λ°•' : (tab == 'closed' ? 'λ§κ°λ¨' : 'μ§„ν–‰μ¤‘')}">
            μ§„ν–‰μ¤‘
          </span>

                    <img th:src="${(event.images != null and !event.images.isEmpty()) ? event.images[0].imgUrl : '/images/default-event.jpg'}"
                         th:alt="${event.eventTitle}" />
                </div>

                <div class="body">
                    <div class="title" th:text="${event.eventTitle}">μ΄λ²¤νΈ μ λ©</div>
                    <div class="desc" th:text="${event.eventContent}">μ΄λ²¤νΈ μ„¤λ…</div>

                    <div class="meta">
            <span th:text="${#temporals.format(event.startAt, 'yyyy.MM.dd')} + ' ~ ' + ${#temporals.format(event.endAt, 'MM.dd')}">
              2026.01.01 ~ 01.31
            </span>
                        <span>μμ„Έν β†’</span>
                    </div>
                </div>
            </a>
        </div>

        <button id="moreBtn" class="more-btn" type="button">λ”λ³΄κΈ°</button>
    </section>
</main>

<script th:src="@{/js/common.js}" defer></script>
</body>
</html>
