<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>이벤트 상세</title>

    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/eventDetail.css}" />
</head>

<body>
<!-- ================= 헤더 ================= -->
<div th:replace="fragments/header :: header"></div>

<main class="container">
    <h2 class="page-title">이벤트 상세</h2>

    <section class="card" id="detail">

        <!-- ✅ 배너/상세 이미지 출력 규칙 -->
        <!-- 1) DETAIL 이미지가 1개라도 있으면: DETAIL만 출력 -->
        <!-- 2) DETAIL이 없으면: THUMB 출력 -->
        <!-- 3) THUMB도 없으면: 기본 이미지 -->
        <div class="hero">

            <!-- ✅ DETAIL 먼저 -->
            <th:block th:if="${event.images != null}">
                <th:block th:if="${#lists.size(event.images.?[imgType == 'CONTENT']) > 0}">
                    <th:block th:each="img : ${event.images.?[imgType == 'CONTENT']}">
                        <img th:src="${img.imgUrl}"
                             th:alt="${event.eventTitle}"
                             class="hero-img" />
                    </th:block>
                </th:block>
            </th:block>

            <!-- ✅ images 자체가 null이면 기본 -->
            <th:block th:if="${event.images == null}">
                <img src="/images/default-event.jpg"
                     th:alt="${event.eventTitle}"
                     class="hero-img" />
            </th:block>

        </div>

        <!-- ✅ 본문 -->
        <div class="content">
            <div class="kicker">
        <span class="badge"
              th:text="${tab != null ? (tab == 'ongoing' ? '진행중' : (tab == 'closing' ? '마감임박' : '마감')) : '진행중'}">
          진행중
        </span>

                <span class="meta"
                      th:text="${#temporals.format(event.startAt,'yyyy.MM.dd')} + ' ~ ' + ${#temporals.format(event.endAt,'MM.dd')}">
          2026.01.01 ~ 01.31
        </span>
            </div>

            <h3 class="title" th:text="${event.eventTitle}">이벤트 제목</h3>

            <p class="text" th:text="${event.eventContent}">
                이벤트 설명
            </p>
        </div>
    </section>

    <div class="actions">
        <button class="ghost-btn" type="button" onclick="history.back()">
            목록으로
        </button>
    </div>
</main>

</body>
</html>